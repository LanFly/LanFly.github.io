<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LocalStorage本地存储入门 | BluesCode</title>
    <link rel='stylesheet' id='heidi-style-css' href='/css/heidi.css' type='text/css' media='all' />
    <meta name="generator" content="github pages" />
    <style type="text/css">
    .content-area a,
    .content-area a:visited {
        color: ;
    }
    
    .site-header,
    .main-navigation ul ul li,
    .site-footer {
        background: ;
    }
    </style>
    <style type="text/css">
    .sticky .entry-header {
        border-top-color: ;
    }
    
    .sticky .entry-footer {
        border-bottom-color: ;
    }
    
    .sticky a {
        color: ;
    }
    
    blockquote {
        border-left-color: ;
    }
    
    .more-link {
        background: ;
    }
    
    .hentry h1 a,
    .posted-on a,
    .more-link:hover,
    .more-link:focus {
        color: ;
    }
    </style>
    <style type="text/css">
    .hentry,
    .comments-area {
        background: ;
    }
    </style>
    <style type="text/css">
    .entry-footer,
    .comment-body,
    .single-post-thumbnail,
    table,
    pre {
        background: ;
    }
    </style>
    <style type="text/css">
    .hentry,
    .comments-area {
        border-color: ;
    }
    </style>
    <style type="text/css">
    .sticky,
    blockquote {
        background: !important;
    }
    </style>
    <style type="text/css">
    .sticky .entry-footer,
    .sticky blockquote,
    thead {
        background: !important;
    }
    </style>
    <style type="text/css">
    .widget-area,
    .date_with_link:hover,
    .page-title {
        background: ;
    }
    
    .widget_calendar td > a,
    .widget_calendar td > a:focus,
    .sticky a:hover,
    .sticky a:focus,
    a:hover,
    a:focus,
    a:active {
        color: ;
    }
    
    @media all and (min-width: 1024px) {
        .widget-area {
            background: transparent;
        }
        .widget {
            background: ;
        }
    }
    </style>
    <style type="text/css">
    .widget-area a {
        color: ;
    }
    </style>
    <style type="text/css">
    .widget-area table {
        background: ;
    }
    </style>
    <style type="text/css">
    .widget-area td,
    .widget-area th {
        border-color: ;
    }
    </style>
    <style type="text/css">
    .recentcomments a {
        display: inline !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    </style>
</head>

<body class="home blog">
    <div id="page" class="hfeed site">
        <header id="masthead" role="banner" class="site-header">
            <div class="site-branding">
                <h1 class="site-title"><a href="/" rel="home" title="回到首页">BluesCode</a></h1>
                <h2 class="site-description">一个以兴趣驱动的个人博客</h2>
                <span class="nav-toggle hidden" title="菜单" href="#">
                    <div class="bars">
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="clear"></div>
                    </div>
                    <p>
                        <span class="menu">Menu</span>
                <span class="close">Close</span>
                </p>
                </span>
            </div>
            <!-- .site-branding -->
        </header>
        <ul class="mobile-menu">
            <li class="menu-item"><a href="/">首页</a></li>
            <li class="menu-item"><a href="/web">web前端</a></li>
            <li class="menu-item"><a href="/mac">MacOSX</a></li>
            <li class="menu-item"><a href="/laneditor" title="一款个性化在线markdown编辑器">LanEditor</a></li>
        </ul>
        <!-- #masthead -->
        <div id="content" class="site-content">
            <div id="primary" class="content-area">
                <main id="main" class="site-main" role="main">
                    <article id="post-52" class="post-52 post type-post status-publish format-standard hentry category-all">
                        <header class="entry-header">
                            <h1 class="entry-title">LocalStorage本地存储入门</h1>
                            <div class="entry-meta">
                                <span class="posted-on">最后编辑：<a href="" rel="bookmark"><time class="entry-date published" datetime="2016-01-14T15:05:59+00:00">2016年1月14日</time></a></span><span class="byline"> by <span class="author vcard"><a class="author-url" href="">BluesCode</a></span></span>
                            </div>
                            <!-- .entry-meta -->
                        </header>
                        <!-- .entry-header -->
                        <div class="entry-content">
                            <p><code class="highlighter-rouge">部分内容摘自网络</code></p>

<p>部分内容转载自 <strong>AlloyTeam</strong> 原文地址：http://www.alloyteam.com/2012/04/sth-about-localstorage/</p>

<h4 id="section">先看支持情况</h4>

<p><img src="http://pic002.cnblogs.com/images/2011/219983/2011052411384081.jpg" alt="" /></p>

<p>早在IE8就已经支持了，这里我们所讨论的默认不考虑IE8系版本。原因为何，自行百度。</p>

<h4 id="localstorage">localStorage本地存储的好处</h4>

<p>HTML5 提供了两种在客户端存储数据的新方法</p>

<ul>
  <li>localStorage - 没有时间限制的数据存储</li>
  <li>sessionStorage - 针对一个 session 的数据存储</li>
</ul>

<p>之前，这些都是由 cookie 完成的。但是 cookie 不适合大量数据的存储，因为它们由每个对服务器的请求来传递，这使得 cookie 速度很慢而且效率也不高。</p>

<p>在 HTML5 中，数据不是由每个服务器请求传递的，而是只有在请求时使用数据。它使在不影响网站性能的情况下存储大量数据成为可能。</p>

<p>对于不同的网站，数据存储于不同的区域，并且一个网站只能访问其自身的数据。</p>

<p>HTML5 使用 JavaScript 来存储和访问数据。</p>

<h4 id="localstorage-1">localStorage使用起来非常简单</h4>

<p>它的本质是由浏览器维护的键值对，数据保存在本地文件。在js抽象中表现为数组或对象，由localStotage对象引用。</p>

<p><strong>注意，本地存储存的值都是字符串，即使你保存的是一个对象，会隐式调用toString()，所以要访问的时候要注意做类型转换</strong></p>

<ul>
  <li><code class="highlighter-rouge">localStorage.setItem(name, value)</code> 保存数据到本地存储</li>
  <li><code class="highlighter-rouge">localStorage.getItem(name)</code> 访问本地存储数据</li>
  <li><code class="highlighter-rouge">localStorage.removeItem(name)</code>删除数据</li>
</ul>

<p>当然，你也可以当成对象使用</p>

<ul>
  <li><code class="highlighter-rouge">localStorage.name = value</code>保存数据</li>
  <li><code class="highlighter-rouge">localStorage.name</code>访问数据</li>
  <li>你不能使用<code class="highlighter-rouge">localStorage.name = null</code>来删除它，这样只会让name的值为null，不推荐这样做</li>
</ul>

<h4 id="localstorage-2">localStorage遍历</h4>

<p>使用length可以获取localStorage的长度，key(i)可以获取键名</p>

<div class="highlighter-rouge"><pre class="highlight"><code>      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">){</span>
          <span class="nx">key</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">key</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
      <span class="p">}</span>
</code></pre>
</div>
<p>这样可以获取所有的键，然后通过键访问数据</p>

<h4 id="section-1">一些细节</h4>

<ul>
  <li>本地存储只能存字符串数据，所有数据在写入的时候会被隐式调用toString方法转为字符串因此，需要存储json之类的数据时，需要自己做转换</li>
  <li>不过需要注意的是，测试的时候需要把文件上传到服务器上（或者localhost），直接点开本地的HTML文件，是不行的</li>
  <li>不同浏览器，分配给本地存储的空间是不一样的，譬如chrome是5M。这5M是整个子域共享的。例如<code class="highlighter-rouge">http://www.alloyteam.com/2012/</code>和<code class="highlighter-rouge">http://www.alloyteam.com/2015/</code>两个页面同在<code class="highlighter-rouge">www.alloyteam.com</code>域下</li>
  <li>当本地存储满了，再往里面写数据，将会触发error（这点和cookie的表现不一样）</li>
  <li>点击这里测试你的浏览器能存储多少字符 <a target="_blank" href="https://arty.name/localstorage.html">Test of localStorage limits/quota</a></li>
  <li>一个unicode字符占2个字节（英文和中文一样），所以5M可以存储5*1024*1024/2=2621440个字符，包括key和value。</li>
</ul>


                        </div>
                        <!-- .entry-content -->
                        <footer class="entry-footer">
                            <span class="cat-links">Posted in <a href="/web" rel="category tag">web前端</a></span> </footer>
                        <!-- .entry-footer -->
                    </article>
                    <!-- #post-## -->
                    <!-- <nav class="navigation post-navigation" role="navigation">
                        <h2 class="screen-reader-text">文章导航</h2>
                        <div class="nav-links">
                            <div class="nav-previous">
                                <span>上一篇：</span>
                                <a href="" rel="prev" id="nav-previous">正在获取...</a>
                            </div>
                            <div class="nav-next">
                                <span>下一篇：</span>
                                <a href="" rel="next" id="nav-next">正在获取...</a>
                            </div>
                        </div>
                    </nav> -->
                    <div id="comments" class="comments-area">
                        <div class="comments-title-container">
                            <h2 class="comment-title"><span class="comment-number" id="commentNumber">No</span> Comments</h2>
                            <h4 class="comment-subtitle"><a href="#respond">Add yours →</a></h4>
                        </div>
                        <ol class="commentlist" id="commentlist">
                            <p style="text-align: center;">正在加载评论...</p>
                            <!-- <li class="comment even thread-even depth-1" id="li-comment-1">
                                <div id="comment-1" class="comment">
                                    <div class="avatar-container">
                                        <img alt='' src='http://localhost/wordpress/wp-content/uploads/2015/12/huidong.gif' srcset='http://0.gravatar.com/avatar/37b7597003d518630ea48a06b729a438?s=320&amp;d=retro&amp;r=g 2x' class='avatar avatar-160 photo' height='160' width='160' /> </div>
                                    <div class="comment-inner">
                                        <div class="comment-header">
                                            <h4>
                                                <a href='http://lansky.com' rel='external nofollow' class='url'>lan</a>
                                                <a class="comment-date-link" href="http://localhost/wordpress/2016/01/14/52/#comment-1" title="2016年1月14日 at 下午3:24">2016年1月14日<span> &mdash; 下午3:24</span></a>
                                            </h4>
                                        </div>
                                        <div class="comment-content post-content">
                                            <p>hello,this test reply</p>
                                            <p>hello,this test reply</p>
                                            <p>hello,this test reply</p>
                                        </div>
                                        <!-- /comment-content
                                        <div class="comment-actions">
                                            <p class="comment-reply"><a rel='nofollow' class='comment-reply-link' href='http://localhost/wordpress/2016/01/14/52/?replytocom=1#respond' onclick='return addComment.moveForm( "comment-1", "1", "respond", "52" )' aria-label='回复给lan'>Reply</a></p>
                                        </div>
                                        <!-- /comment-actions
                                    </div>
                                    <!-- /comment-inner
                                </div>
                                <!-- /comment-##
                            </li> -->
                            <!-- #comment-## -->
                        </ol>
                        <!-- 评论 -->
                        <div id="respond" class="comment-respond">
                            <div>
                                <h3 id="reply-title" class="comment-reply-title">发表你的评论</h3>
                                <small id="cancel-reply" class="cancel-reply"></small>
                            </div>
                            <form action="" method="post" id="commentform" class="comment-form">
                                <p class="comment-form-author">
                                    <label for="author">Name<span class="required">*</span></label>
                                    <input id="author" name="author" type="text" value="" size="30" required/>
                                </p>
                                <p class="comment-form-email">
                                    <label for="email">Email<span class="required">*</span></label>
                                    <input id="email" name="email" type="text" value="" size="30" placeholder="评论使用Gravatar头像" required/>
                                </p>
                                <p class="comment-form-url">
                                    <label for="url">Website</label>
                                    <input id="url" name="url" type="text" value="" size="30" placeholder="请带上 http://" />
                                </p>
                                <p class="comment-form-comment">
                                    <label for="comment">Comment</label>
                                    <textarea id="comment" name="comment" cols="45" rows="6" required></textarea>
                                </p>
                                <p class="form-submit">
                                    <input name="submit" type="submit" id="submit" class="submit" value="发表评论" />
                                    <input type='hidden' name='replyto' value='' id='replyto' />
                                </p>
                            </form>
                        </div>
                        <!-- 评论框 -->
                    </div>

                </main>
                <!-- #main -->
            </div>
            <!-- #primary -->
            <div id="secondary" class="widget-area" role="complementary">
                <aside id="recent-posts" class="widget widget_recent_entries">
                    <h1 class="widget-title">近期文章</h1>
                    <ul>
                        <li>
                            <a href="http://localhost/wordpress/2016/01/14/52/">test</a>
                        </li>
                        <li>
                            <a href="http://localhost/wordpress/2015/12/01/5/">LanEditor</a>
                        </li>
                    </ul>
                </aside>

            </div>
            <!-- #secondary -->
        </div>
        <!-- #content -->
        <footer id="colophon" class="site-footer" role="contentinfo">
            <div class="site-info">Powered by 
                <a href="http://jekyllrb.com/">jekyll</a>
                <span class="sep"> </span> Theme optimized by <a href="mailto:bluescode@outlook.com">BluesCode</a> based on <a href="http://www.andersnoren.se/teman/rams-wordpress-theme/">Rams</a> and <a href="http://alexaweidinger.com" rel="designer">Alexa Weidinger</a></div>
            <!-- .site-info -->
        </footer>
        <!-- #colophon -->
    </div>
    <!-- #page -->
    <!-- <script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script> -->
    <script type="text/javascript" src="/javascript/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/javascript/useragent.js"></script>
    <script type="text/javascript" src="/javascript/heidi.js"></script>
    <script type="text/javascript" src="/javascript/post-heidi.js"></script>
</body>

</html>
